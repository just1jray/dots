set -g mouse on

# Set prefix to Ctrl-a (easier to type than Ctrl-b)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Start window numbering at 1 (easier to switch with keyboard)
set -g base-index 1
setw -g pane-base-index 1

# Improve colors
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Set status bar position to bottom (default)
set -g status-position bottom

# Tokyo Night colors
# Background: #1a1b26 (dark blue)
# Foreground: #c0caf5 (light blue/lavender)
# Purple: #bb9af7
# Cyan: #7dcfff
# Green: #9ece6a
# Orange: #ff9e64
# Red: #f7768e

# Status bar styling - Tokyo Night theme
set -g status-style bg='#1a1b26',fg='#c0caf5'

# Left status - session name
set -g status-left-length 40
set -g status-left "#[fg=#1a1b26,bg=#7dcfff,bold] #S #[fg=#7dcfff,bg=#1a1b26]"

# Window status
setw -g window-status-format "#[fg=#787c99] #I:#W "
setw -g window-status-current-format "#[fg=#1a1b26,bg=#bb9af7]#[fg=#1a1b26,bg=#bb9af7,bold] #I:#W #[fg=#bb9af7,bg=#1a1b26]"

# Right status - system info with battery (simplified version with alternative icons)
set -g status-right-length 100

# Modified battery display with alternative icons that work in most terminals
set -g status-right "#[fg=#ff9e64,bold]#{battery_icon} #{battery_percentage} #[fg=#787c99]| #(whoami)@#h | %b %d %H:%M "

# Refresh status bar every 5 seconds
set -g status-interval 5

# Center the window list
set -g status-justify centre

# Enable activity alerts
setw -g monitor-activity on
set -g visual-activity on

# Pane borders
set -g pane-border-style fg='#3b4261'
set -g pane-active-border-style fg='#7dcfff'

# Message styling
set -g message-style bg='#7dcfff',fg='#1a1b26',bold

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-battery'  # Battery indicator
set -g @plugin 'tmux-plugins/tmux-resurrect'  # Save and restore tmux sessions
set -g @plugin 'tmux-plugins/tmux-continuum'  # Auto-save sessions

# Battery icon settings - alternative emoji set
set -g @batt_icon_charge_tier8 'ðŸ”‹'
set -g @batt_icon_charge_tier7 'ðŸ”‹'
set -g @batt_icon_charge_tier6 'ðŸ”‹'
set -g @batt_icon_charge_tier5 'ðŸ”‹'
set -g @batt_icon_charge_tier4 'ðŸ”‹'
set -g @batt_icon_charge_tier3 'ðŸ”‹'
set -g @batt_icon_charge_tier2 'ðŸ”‹'
set -g @batt_icon_charge_tier1 'ðŸª«'
set -g @batt_icon_status_charged 'âš¡'
set -g @batt_icon_status_charging 'âš¡'
set -g @batt_icon_status_discharging 'ðŸ“‰'

# Auto-save sessions every 15 minutes
set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'

# Tmux Resurrect configuration
set -g @resurrect-dir '~/.tmux/resurrect'
set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'
set -g @resurrect-save-shell-history 'on'

# Add key bindings for manual save/restore
set -g @resurrect-save 'S'    # Save with prefix + S
set -g @resurrect-restore 'R' # Restore with prefix + R

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

