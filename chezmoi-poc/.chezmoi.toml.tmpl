{{- $name := "Your Name" -}}
{{- $email := "your.email@example.com" -}}
{{- $work := false -}}
{{- $use_1password := false -}}
{{- $onepassword_github_ref := "op://Private/GitHub/credential" -}}
{{- $onepassword_ssh_ref := "op://Private/SSH/signing_key" -}}

{{- if eq .chezmoi.hostname "work-macbook" -}}
{{-   $work = true -}}
{{-   $name = "Work Name" -}}
{{-   $email = "work.email@company.com" -}}
{{- end -}}

{{- /* Prompt for values on first run */ -}}
{{- if not (env "CHEZMOI_INITIALIZED") -}}
{{-   $name = promptString "name" $name -}}
{{-   $email = promptString "email" $email -}}
{{-   $work = promptBool "work" $work -}}
{{-   $use_1password = promptBool "use_1password" $use_1password -}}
{{-   if $use_1password -}}
{{-     $onepassword_github_ref = promptString "1password_github_ref (e.g., op://Private/GitHub Token/credential)" $onepassword_github_ref -}}
{{-   end -}}
{{- end -}}

[data]
    name = {{ $name | quote }}
    email = {{ $email | quote }}
    work = {{ $work }}
    use_1password = {{ $use_1password }}

    {{- if $use_1password }}
    # 1Password integration - requires 'op signin' first
    # Get GitHub token from 1Password
    github_token = {{ onepasswordRead $onepassword_github_ref | quote }}

    # Get SSH signing key from 1Password (optional - commented out by default)
    # ssh_signing_key = {{ onepasswordRead $onepassword_ssh_ref | quote }}
    {{- else }}
    # 1Password integration disabled
    # Uncomment and configure manually if needed
    # github_token = ""
    # ssh_signing_key = ""
    {{- end }}

[diff]
    pager = "delta"

[merge]
    command = "nvim"
    args = ["-d", "{{ "{{ .Destination }}" }}", "{{ "{{ .Source }}" }}", "{{ "{{ .Target }}" }}"]

