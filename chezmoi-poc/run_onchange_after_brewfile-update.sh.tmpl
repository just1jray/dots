#!/bin/bash
# run_onchange_after_brewfile-update.sh.tmpl
# Runs whenever the Brewfile changes
# Hash: {{ include "Brewfile.tmpl" | sha256sum }}

{{- if eq .chezmoi.os "darwin" }}

set -euo pipefail

echo "üç∫ Brewfile changed, updating packages..."

if command -v brew &> /dev/null; then
    brew bundle --global --no-lock
    echo "‚úÖ Brew packages updated!"
else
    echo "‚ö†Ô∏è  Homebrew not installed, skipping"
    exit 0
fi

{{- else }}
# Not macOS, skip brew operations
exit 0
{{- end }}
